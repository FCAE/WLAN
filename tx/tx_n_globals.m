%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%       Written by Micha Anholt, Metalink Broadband
%       Contact   micha_a@metalinkbb.com
%       www.metalinkbb.com
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% tx_n_globals file
% Initializes tables, resets debug struct
function  tx_n_globals()
global Legacy_Info   MCS_Info20   MCS_Info40;
global PHTLTF;
global T_ITX_CS T_ISTS_TS; %table n65
global tx_n_debug;
global num_vec denum_vec;


tx_n_debug=[];


%mcs	puncturing-ind	NBPSC	Lsig Rate Field
Legacy_Info = [ ...
0	0	1	11	; 
1	2	1	15	; 
2	0	2	10  ; 
3	2	2	14	; 
4	0	4	9	; 
5	2	4	13	; 
6	1	6	8	; 
7	2	6	12	];




%mcs	puncturing-ind	NSS	constel1	constel2	constel3	constel4
MCS_Info20 = [ ...
     0     0     1     1     0     0     0;
     1     0     1     2     0     0     0;
     2     2     1     2     0     0     0;
     3     0     1     4     0     0     0;
     4     2     1     4     0     0     0;
     5     1     1     6     0     0     0;
     6     2     1     6     0     0     0;
     7     3     1     6     0     0     0;
     8     0     2     1     1     0     0;
     9     0     2     2     2     0     0;
    10     2     2     2     2     0     0;
    11     0     2     4     4     0     0;
    12     2     2     4     4     0     0;
    13     1     2     6     6     0     0;
    14     2     2     6     6     0     0;
    15     3     2     6     6     0     0;
    16     0     3     1     1     1     0;
    17     0     3     2     2     2     0;
    18     2     3     2     2     2     0;
    19     0     3     4     4     4     0;
    20     2     3     4     4     4     0;
    21     1     3     6     6     6     0;
    22     2     3     6     6     6     0;
    23     3     3     6     6     6     0;
    24     0     4     1     1     1     1;
    25     0     4     2     2     2     2;
    26     2     4     2     2     2     2;
    27     0     4     4     4     4     4;
    28     2     4     4     4     4     4;
    29     1     4     6     6     6     6;
    30     2     4     6     6     6     6;
    31     3     4     6     6     6     6;
    33     0     2     4     2     0     0;
    34     0     2     6     2     0     0;
    35     0     2     6     4     0     0;
    36     2     2     4     2     0     0;
    37     2     2     6     2     0     0;
    38     2     2     6     4     0     0;
    39     0     3     4     2     2     0;
    40     0     3     4     4     2     0;
    41     0     3     6     2     2     0;
    42     0     3     6     4     2     0;
    43     0     3     6     4     4     0;
    44     0     3     6     6     2     0;
    45     0     3     6     6     4     0;
    46     2     3     4     2     2     0;
    47     2     3     4     4     2     0;
    48     2     3     6     2     2     0;
    49     2     3     6     4     2     0;
    50     2     3     6     4     4     0;
    51     2     3     6     6     2     0;
    52     2     3     6     6     4     0;
    53     0     4     4     2     2     2;
    54     0     4     4     4     2     2;
    55     0     4     4     4     4     2;
    56     0     4     6     2     2     2;
    57     0     4     6     4     2     2;
    58     0     4     6     4     4     2;
    59     0     4     6     4     4     4;
    60     0     4     6     6     2     2;
    61     0     4     6     6     4     2;
    62     0     4     6     6     4     4;
    63     0     4     6     6     6     2;
    64     0     4     6     6     6     4;
    65     2     4     4     2     2     2;
    66     2     4     4     4     2     2;
    67     2     4     4     4     4     2;
    68     2     4     6     2     2     2;
    69     2     4     6     4     2     2;
    70     2     4     6     4     4     2;
    71     2     4     6     4     4     4;
    72     2     4     6     6     2     2;
    73     2     4     6     6     4     2;
    74     2     4     6     6     4     4;
    75     2     4     6     6     6     2;
    76     2     4     6     6     6     4;

];

MCS_Info40 = [ ...
     0     0     1     1     0     0     0;
     1     0     1     2     0     0     0;
     2     2     1     2     0     0     0;
     3     0     1     4     0     0     0;
     4     2     1     4     0     0     0;
     5     1     1     6     0     0     0;
     6     2     1     6     0     0     0;
     7     3     1     6     0     0     0;
     8     0     2     1     1     0     0;
     9     0     2     2     2     0     0;
    10     2     2     2     2     0     0;
    11     0     2     4     4     0     0;
    12     2     2     4     4     0     0;
    13     1     2     6     6     0     0;
    14     2     2     6     6     0     0;
    15     3     2     6     6     0     0;
    16     0     3     1     1     1     0;
    17     0     3     2     2     2     0;
    18     2     3     2     2     2     0;
    19     0     3     4     4     4     0;
    20     2     3     4     4     4     0;
    21     1     3     6     6     6     0;
    22     2     3     6     6     6     0;
    23     3     3     6     6     6     0;
    24     0     4     1     1     1     1;
    25     0     4     2     2     2     2;
    26     2     4     2     2     2     2;
    27     0     4     4     4     4     4;
    28     2     4     4     4     4     4;
    29     1     4     6     6     6     6;
    30     2     4     6     6     6     6;
    31     3     4     6     6     6     6;
    32     0     1     1     0     0     0;
    33     0     2     4     2     0     0;
    34     0     2     6     2     0     0;
    35     0     2     6     4     0     0;
    36     2     2     4     2     0     0;
    37     2     2     6     2     0     0;
    38     2     2     6     4     0     0;
    39     0     3     4     2     2     0;
    40     0     3     4     4     2     0;
    41     0     3     6     2     2     0;
    42     0     3     6     4     2     0;
    43     0     3     6     4     4     0;
    44     0     3     6     6     2     0;
    45     0     3     6     6     4     0;
    46     2     3     4     2     2     0;
    47     2     3     4     4     2     0;
    48     2     3     6     2     2     0;
    49     2     3     6     4     2     0;
    50     2     3     6     4     4     0;
    51     2     3     6     6     2     0;
    52     2     3     6     6     4     0;
    53     0     4     4     2     2     2;
    54     0     4     4     4     2     2;
    55     0     4     4     4     4     2;
    56     0     4     6     2     2     2;
    57     0     4     6     4     2     2;
    58     0     4     6     4     4     2;
    59     0     4     6     4     4     4;
    60     0     4     6     6     2     2;
    61     0     4     6     6     4     2;
    62     0     4     6     6     4     4;
    63     0     4     6     6     6     2;
    64     0     4     6     6     6     4;
    65     2     4     4     2     2     2;
    66     2     4     4     4     2     2;
    67     2     4     4     4     4     2;
    68     2     4     6     2     2     2;
    69     2     4     6     4     2     2;
    70     2     4     6     4     4     2;
    71     2     4     6     4     4     4;
    72     2     4     6     6     2     2;
    73     2     4     6     6     4     2;
    74     2     4     6     6     4     4;
    75     2     4     6     6     6     2;
    76     2     4     6     6     6     4;
];

PHTLTF = [ 1 -1  1   1 ;
           1  1 -1   1 ;
           1  1  1  -1 ;
          -1  1  1   1 ;];

% Table n65
 T_ITX_CS     = [  0    0    0    0;
                   0 -200    0    0;
                   0 -100 -200    0;
                   0  -50 -100 -150;];
  
T_ISTS_TS    = [  0    0    0    0;
                  0 -400    0    0;
                  0 -400 -200    0;
                  0 -400 -200 -600;];

% Code rate numerator and denumerator
num_vec   = [ 1 2 3 5];
denum_vec = [ 2 3 4 6];

global Punct Pilot_Subcarriers_20 Pilot_Subcarriers_40

Punct_1_2 = [1 ] ;
Punct_2_3 = [1 1 1 0 1 1 1 0 1 1 1 0] ;
Punct_3_4 = [1 1 1 0 0 1 1 1 1 0 0 1 1 1 1 0 0 1] ;
Punct_5_6 = [1 1 1 0 0 1 1 0 0 1 ] ;


Punct = cell(4,1);
Punct{1}= Punct_1_2;
Punct{2}= Punct_2_3;
Punct{3}= Punct_3_4;
Punct{4}= Punct_5_6;

Pilot_Subcarriers_20=[-21 -7 7 21];
Pilot_Subcarriers_40=[-53 -25 -11 11 25 53] ;
